<!DOCTYPE html>
<html>
<head>
<script>
  // Global accessor that the popup uses.
  var hcards = {};
  var hcalendars = {};
  var hreviews = {};

  function updateAddress(tabId) {
    chrome.tabs.sendRequest(tabId, {}, function() {
      chrome.pageAction.show(tabId);
    });
  }

  chrome.tabs.onUpdated.addListener(function(tabId, change, tab) {
    if (change.status == "complete") {
      updateAddress(tabId);
    }
  });

  // Ensure the current selected tab is set up.
  chrome.tabs.getSelected(null, function(tab) {
    updateAddress(tab.id);
  });
</script>
</head>
</html>
